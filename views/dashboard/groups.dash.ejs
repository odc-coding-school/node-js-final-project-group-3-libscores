<section class="bg-white mid-round small-padding">
    <!-- <div class="load full-width"></div> -->

    <% if (groups && groups.length > 0) { %>
        <% 
            // Group teams by their group_name
            let groupedTeams = groups.reduce((acc, team) => {
                if (!acc[team.group_name]) {
                    acc[team.group_name] = [];
                }
                acc[team.group_name].push(team);
                return acc;
            }, {}); 
        %>


<% Object.keys(groupedTeams).forEach(groupName => { %>
    <div class="border small-round">
        <h4 class="small-padding align-center large">Group <%= groupName %></h4>
        <table class="table tiny">
            <thead class="thead tiny">
                <tr>
                    <th>#</th>
                    <th>Team</th>
                    <th>GP</th>
                    <th>W</th>
                    <th>D</th>
                    <th>L</th>
                    <th class="cap">Goals</th>
                    <th>PTS</th>
                </tr>
            </thead>
            <tbody class="tbody" id="tbody-<%= groupName %>">
                <% if (groupedTeams[groupName].length > 0) { %>
                    <% groupedTeams[groupName].forEach((team, index) => { %>
                        <tr>
                            <td><%= index + 1 %></td>
                            <td class="row">
                                <img src="/images/<%= team.badge %>" alt="<%= team.team_name %> Logo" class="tiny-logo">
                                <%= team.team_name %>
                            </td>
                            <td>0</td> <!-- Placeholder for GP -->
                            <td>0</td> <!-- Placeholder for Wins -->
                            <td>0</td> <!-- Placeholder for Draws -->
                            <td>0</td> <!-- Placeholder for Losses -->
                            <td>0</td> <!-- Placeholder for Goals -->
                            <td>0</td> <!-- Placeholder for Points -->
                        </tr>
                        <% }); %>
                        <% } else { %>
                            <tr>
                                <td colspan="8">No teams available in this group.</td>
                            </tr>
                            <% } %>
            </tbody>
        </table>
        <% }); %>
    </div>
    <% } else { %>
        <p>No groups available.</p>
    <% } %>
</section>
