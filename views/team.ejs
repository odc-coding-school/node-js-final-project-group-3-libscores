<%- include("./partial/head") %>
<%- include("./partial/top-nav") %>
<div id="main-body">
    
    <div class="team-header">
        <h1 class="team-title"><%= team.club %></h1>
        <div class="team-details">
            <p><strong>Founded:</strong> <%= team.founded %></p>
            <p><strong>Country:</strong> <%= team.country_id %></p>
        </div>
    </div>
    
    <div class="tabs">
        <div class="tab active-tab" onclick="showContent('summary')">Summary</div>
        <div class="tab" onclick="showContent('matches')">Matches</div>
        <div class="tab" onclick="showContent('squad')">Squad</div>
    </div>
    
    <!-- Summary Section -->
    <div class="content active" id="summary">
        <h2>Summary</h2>
        <p>Here you can add a summary of the team, including achievements, history, or other important information.</p>
    </div>
    
    <!-- Matches Section -->
    <div class="content" id="matches">
        <h2 class="matches-title">Matches</h2>
    
        <% if (matches.length === 0) { %>
            <p class="no-matches">No matches found for this team.</p>
        <% } else { %>
            <table class="matches-table">
                <thead class="matches-header">
                    <tr class="matches-row">
                        <th>Date</th>
                        <th>Home Team</th>
                        <th>Away Team</th>
                        <th>Home Goals</th>
                        <th>Away Goals</th>
                        <th>Score</th>
                        <th>Status</th>
                        <th>Season</th>
                    </tr>
                </thead>
                <tbody class="matches-body">
                    <% matches.forEach(match => { %>
                        <tr class="matches-row">
                            <td class="matches-cell"><%= match.date %></td>
                            <td class="matches-cell"><%= match.home %></td>
                            <td class="matches-cell"><%= match.away %></td>
                            <td class="matches-cell"><%= match.home_goal %></td>
                            <td class="matches-cell"><%= match.away_goal %></td>
                            <td class="matches-cell"><%= match.score || 'N/A' %></td>
                            <td class="matches-cell"><%= match.status %></td>
                            <td class="matches-cell"><%= match.season_id %></td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } %>
    </div>
    
    <!-- Squad Section -->
    <div class="content" id="squad">
        <h2 class="squad-title">Squad</h2>
        <% 
        // Group players by position
        const playersByPosition = squad.reduce((acc, player) => {
            acc[player.position] = acc[player.position] || [];
            acc[player.position].push(player);
            return acc;
        }, {});
        %>
    
        <% if (squad.length === 0) { %>
            <div class="no-players">No players found for this team.</div>
        <% } else { %>
            <% Object.keys(playersByPosition).forEach(position => { %>
                <div class="squad-position"><%= position %></div>
                <table class="squad-table">
                    <thead class="squad-header">
                        <tr class="squad-row">
                            <th>Name</th>
                        </tr>
                    </thead>
                    <tbody class="squad-body">
                        <% playersByPosition[position].forEach(player => { %>
                            <tr class="squad-row">
                                <td><%= player.fullname %></td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            <% }); %>
        <% } %>
    </div>
</div>
    <script>
        function showContent(contentId) {
            // Hide all content
            const contents = document.querySelectorAll('.content');
            contents.forEach(content => {
                content.classList.remove('active');
            });
    
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active-tab');
            });
    
            // Show the selected content and add active class to the tab
            document.getElementById(contentId).classList.add('active');
            document.querySelector(`.tab[onclick="showContent('${contentId}')"]`).classList.add('active-tab');
        }
    </script>